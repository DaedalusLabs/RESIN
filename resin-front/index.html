<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link data-trunk rel="css" href="./styles/output.css">
    <link data-trunk rel="copy-dir" href="./public">
    <link data-trunk rel="copy-file" href="./manifest.json">

    <title>Wioso</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="/public/BrandIcon_RESIN.png" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://unpkg.com/maplibre-gl@^5.2.0/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@^5.2.0/dist/maplibre-gl.css" rel="stylesheet" />

</head>

<body class="font-inter" href="/">
    <div id="loading-screen"
        style="position: fixed; top: 0; left: 0; bottom: 0; right: 0; background-color: #F07E19; z-index: 9999; display: flex; justify-content: center; align-items: center;">
        <img src="./public/daedalus_large_white.png" alt="Wioso" style="width: 128px; height: 128px;">
    </div>
</body>

<script>

    // Function to hide the spinner
    function hideLoadingScreen() {
        // completely remove the spinener from the dom 
        var el = document.getElementById('loading-screen');
        if (el) {
            el.remove();
        }
    }

    // // Show the spinner when the page starts loading
    // showSpinner();

    // Polling function to check if the WASM module is loaded
    function checkWasmLoaded() {
        if (window.hasOwnProperty('wasmBindings')) {
            /// WASM module has been loaded and bindings are available
            hideLoadingScreen();
        } else {
            /// Continue polling every 200ms until it's loaded
            setTimeout(checkWasmLoaded, 200);
        }
    }

    // Start polling for WASM readiness
    checkWasmLoaded();
</script>

</html>
